#ddev-generated
services:
  agents:
    container_name: ddev-${DDEV_PROJECT}-agents
    # CHANGE THIS LINE: Use the Python 3 image (supports Apple Silicon)
    image: mcr.microsoft.com/devcontainers/python:3-bookworm
    hostname: agents
    user: vscode
    restart: "no"
    volumes:
      - ../:/workspace:cached
      - ddev-global-cache:/mnt/ddev-global-cache
      - /var/run/docker.sock:/var/run/docker.sock
    working_dir: /workspace
    environment:
      - DDEV_PROJECT=${DDEV_PROJECT}
    entrypoint: /bin/bash
    command: ["-c", "groupmod -g 1001 docker 2>/dev/null || groupadd -g 1001 docker; usermod -aG docker vscode; exec sleep infinity"]
    labels:
      com.ddev.site-name: ${DDEV_PROJECT}
      com.ddev.app-type: agents